<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/layout :: head('Resources - MindWell')}">
</head>

<body class="bg-background-light dark:bg-background-dark font-display text-slate-700 dark:text-slate-300 antialiased">
    <div class="flex h-screen">
        <div th:replace="~{fragments/sidebar-student :: sidebar('resources')}"></div>

        <main class="flex-1 p-8 overflow-y-auto">
            <header class="mb-8">
                <h2 class="text-3xl font-bold text-slate-900 dark:text-white">Resource Library</h2>
                <p class="text-slate-500 dark:text-slate-400 mt-1">Explore articles, videos, and guides to support your
                    mental wellness.</p>
            </header>

            <!-- Search & Filter -->
            <div class="flex flex-col md:flex-row gap-4 mb-8">
                <div class="relative flex-1">
                    <span
                        class="material-symbols-outlined absolute left-3 top-1/2 -translate-y-1/2 text-slate-400">search</span>
                    <input type="text" id="searchInput" placeholder="Search resources..."
                        class="w-full pl-10 pr-4 py-3 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg focus:ring-primary focus:border-primary"
                        onkeyup="filterResources()" />
                </div>
                <div class="flex gap-2" id="filterButtons">
                    <button class="filter-btn active px-4 py-2 bg-primary text-white rounded-lg font-medium"
                        onclick="setFilter('all', this)">All</button>
                    <button
                        class="filter-btn px-4 py-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg font-medium hover:bg-slate-50 dark:hover:bg-slate-800"
                        onclick="setFilter('article', this)">Articles</button>
                    <button
                        class="filter-btn px-4 py-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg font-medium hover:bg-slate-50 dark:hover:bg-slate-800"
                        onclick="setFilter('video', this)">Videos</button>
                    <button
                        class="filter-btn px-4 py-2 bg-white dark:bg-slate-900 border border-slate-200 dark:border-slate-800 rounded-lg font-medium hover:bg-slate-50 dark:hover:bg-slate-800"
                        onclick="setFilter('guide', this)">Guides</button>
                </div>
            </div>

            <!-- Resource Categories -->
            <div id="resourceGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Coping Strategies -->
                <div class="resource-card bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden hover:shadow-lg transition-shadow"
                    data-type="guide" data-title="Coping Strategies for Stress">
                    <div class="h-40 bg-gradient-to-br from-teal-400 to-green-500 flex items-center justify-center">
                        <span class="material-symbols-outlined text-6xl text-white/80">spa</span>
                    </div>
                    <div class="p-5">
                        <span
                            class="text-xs font-semibold text-teal-600 bg-teal-100 dark:bg-teal-900/50 px-2 py-1 rounded-full">Guide</span>
                        <h4 class="text-lg font-semibold text-slate-900 dark:text-white mt-3">Coping Strategies for
                            Stress</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mt-2">Learn practical techniques to manage
                            daily stress and build resilience.</p>
                        <button onclick="openResource('Coping Strategies for Stress', 'guide')"
                            class="inline-flex items-center gap-1 text-primary font-medium mt-4 hover:underline">
                            Read More <span class="material-symbols-outlined text-base">arrow_forward</span>
                        </button>
                    </div>
                </div>

                <!-- Anxiety Video -->
                <div class="resource-card bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden hover:shadow-lg transition-shadow"
                    data-type="video" data-title="Understanding Anxiety">
                    <div
                        class="h-40 bg-gradient-to-br from-purple-400 to-indigo-500 flex items-center justify-center relative">
                        <span class="material-symbols-outlined text-6xl text-white/80">play_circle</span>
                    </div>
                    <div class="p-5">
                        <span
                            class="text-xs font-semibold text-purple-600 bg-purple-100 dark:bg-purple-900/50 px-2 py-1 rounded-full">Video</span>
                        <h4 class="text-lg font-semibold text-slate-900 dark:text-white mt-3">Understanding Anxiety</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mt-2">A comprehensive video explaining
                            anxiety symptoms and management.</p>
                        <button onclick="openResource('Understanding Anxiety', 'video')"
                            class="inline-flex items-center gap-1 text-primary font-medium mt-4 hover:underline">
                            Watch Now <span class="material-symbols-outlined text-base">arrow_forward</span>
                        </button>
                    </div>
                </div>

                <!-- Mindfulness Article -->
                <div class="resource-card bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden hover:shadow-lg transition-shadow"
                    data-type="article" data-title="Mindfulness for Beginners">
                    <div class="h-40 bg-gradient-to-br from-amber-400 to-orange-500 flex items-center justify-center">
                        <span class="material-symbols-outlined text-6xl text-white/80">self_improvement</span>
                    </div>
                    <div class="p-5">
                        <span
                            class="text-xs font-semibold text-amber-600 bg-amber-100 dark:bg-amber-900/50 px-2 py-1 rounded-full">Article</span>
                        <h4 class="text-lg font-semibold text-slate-900 dark:text-white mt-3">Mindfulness for Beginners
                        </h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mt-2">Start your mindfulness journey with
                            simple exercises you can do anywhere.</p>
                        <button onclick="openResource('Mindfulness for Beginners', 'article')"
                            class="inline-flex items-center gap-1 text-primary font-medium mt-4 hover:underline">
                            Read More <span class="material-symbols-outlined text-base">arrow_forward</span>
                        </button>
                    </div>
                </div>

                <!-- Depression Guide -->
                <div class="resource-card bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden hover:shadow-lg transition-shadow"
                    data-type="guide" data-title="Recognizing Depression Signs">
                    <div class="h-40 bg-gradient-to-br from-blue-400 to-cyan-500 flex items-center justify-center">
                        <span class="material-symbols-outlined text-6xl text-white/80">psychology</span>
                    </div>
                    <div class="p-5">
                        <span
                            class="text-xs font-semibold text-blue-600 bg-blue-100 dark:bg-blue-900/50 px-2 py-1 rounded-full">Guide</span>
                        <h4 class="text-lg font-semibold text-slate-900 dark:text-white mt-3">Recognizing Depression
                            Signs</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mt-2">Learn to identify early symptoms and
                            when to seek professional help.</p>
                        <button onclick="openResource('Recognizing Depression Signs', 'guide')"
                            class="inline-flex items-center gap-1 text-primary font-medium mt-4 hover:underline">
                            Read More <span class="material-symbols-outlined text-base">arrow_forward</span>
                        </button>
                    </div>
                </div>

                <!-- Sleep Hygiene -->
                <div class="resource-card bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden hover:shadow-lg transition-shadow"
                    data-type="article" data-title="Sleep Hygiene Tips">
                    <div class="h-40 bg-gradient-to-br from-indigo-400 to-violet-500 flex items-center justify-center">
                        <span class="material-symbols-outlined text-6xl text-white/80">bedtime</span>
                    </div>
                    <div class="p-5">
                        <span
                            class="text-xs font-semibold text-indigo-600 bg-indigo-100 dark:bg-indigo-900/50 px-2 py-1 rounded-full">Article</span>
                        <h4 class="text-lg font-semibold text-slate-900 dark:text-white mt-3">Sleep Hygiene Tips</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mt-2">Improve your sleep quality with
                            evidence-based recommendations.</p>
                        <button onclick="openResource('Sleep Hygiene Tips', 'article')"
                            class="inline-flex items-center gap-1 text-primary font-medium mt-4 hover:underline">
                            Read More <span class="material-symbols-outlined text-base">arrow_forward</span>
                        </button>
                    </div>
                </div>

                <!-- Breathing Exercises -->
                <div class="resource-card bg-white dark:bg-slate-900 rounded-xl border border-slate-200 dark:border-slate-800 overflow-hidden hover:shadow-lg transition-shadow"
                    data-type="video" data-title="Breathing Exercises">
                    <div class="h-40 bg-gradient-to-br from-pink-400 to-rose-500 flex items-center justify-center">
                        <span class="material-symbols-outlined text-6xl text-white/80">pulmonology</span>
                    </div>
                    <div class="p-5">
                        <span
                            class="text-xs font-semibold text-pink-600 bg-pink-100 dark:bg-pink-900/50 px-2 py-1 rounded-full">Video</span>
                        <h4 class="text-lg font-semibold text-slate-900 dark:text-white mt-3">Breathing Exercises</h4>
                        <p class="text-sm text-slate-500 dark:text-slate-400 mt-2">Follow along with guided breathing
                            techniques to reduce anxiety.</p>
                        <button onclick="openResource('Breathing Exercises', 'video')"
                            class="inline-flex items-center gap-1 text-primary font-medium mt-4 hover:underline">
                            Watch Now <span class="material-symbols-outlined text-base">arrow_forward</span>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Resource Modal -->
    <div id="resourceModal" class="hidden fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50">
        <div class="bg-white dark:bg-slate-900 rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div
                class="p-6 border-b border-slate-200 dark:border-slate-800 flex justify-between items-center sticky top-0 bg-white dark:bg-slate-900">
                <h3 id="modalTitle" class="text-xl font-bold text-slate-900 dark:text-white"></h3>
                <button onclick="closeModal()" class="text-slate-400 hover:text-slate-600">
                    <span class="material-symbols-outlined">close</span>
                </button>
            </div>
            <div id="modalContent" class="p-6">
                <!-- Content loaded dynamically -->
            </div>
        </div>
    </div>

    <!-- Success Toast -->
    <div id="successToast"
        class="hidden fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg flex items-center gap-2 z-50">
        <span class="material-symbols-outlined">bookmark_added</span>
        <span id="toastMessage">Added to your reading list!</span>
    </div>

    <script>
        let currentFilter = 'all';

        function setFilter(filter, btn) {
            currentFilter = filter;
            document.querySelectorAll('.filter-btn').forEach(b => {
                b.classList.remove('active', 'bg-primary', 'text-white');
                b.classList.add('bg-white', 'dark:bg-slate-900', 'border', 'border-slate-200', 'dark:border-slate-800');
            });
            btn.classList.add('active', 'bg-primary', 'text-white');
            btn.classList.remove('bg-white', 'dark:bg-slate-900', 'border', 'border-slate-200', 'dark:border-slate-800');
            filterResources();
        }

        function filterResources() {
            const search = document.getElementById('searchInput').value.toLowerCase();
            const cards = document.querySelectorAll('.resource-card');

            cards.forEach(card => {
                const type = card.dataset.type;
                const title = card.dataset.title.toLowerCase();

                const matchesFilter = currentFilter === 'all' || type === currentFilter;
                const matchesSearch = title.includes(search);

                card.style.display = matchesFilter && matchesSearch ? '' : 'none';
            });
        }

        const resourceContent = {
            'Coping Strategies for Stress': {
                type: 'guide',
                content: `
                    <div class="prose dark:prose-invert max-w-none">
                        <h4>Introduction</h4>
                        <p>Stress is a normal part of life, especially for students. Learning effective coping strategies can help you manage stress and maintain your mental well-being.</p>
                        
                        <h4>Key Strategies</h4>
                        <ol>
                            <li><strong>Deep Breathing</strong> - Practice the 4-7-8 technique: inhale for 4 seconds, hold for 7, exhale for 8.</li>
                            <li><strong>Physical Activity</strong> - Even a 10-minute walk can significantly reduce stress hormones.</li>
                            <li><strong>Time Management</strong> - Break large tasks into smaller, manageable chunks.</li>
                            <li><strong>Social Support</strong> - Talk to friends, family, or counselors about your feelings.</li>
                            <li><strong>Mindfulness</strong> - Practice being present in the moment without judgment.</li>
                        </ol>
                        
                        <h4>Try This Exercise</h4>
                        <p>The 5-4-3-2-1 Grounding Technique:</p>
                        <ul>
                            <li>Name 5 things you can see</li>
                            <li>Name 4 things you can touch</li>
                            <li>Name 3 things you can hear</li>
                            <li>Name 2 things you can smell</li>
                            <li>Name 1 thing you can taste</li>
                        </ul>
                    </div>
                    <button onclick="saveResource('Coping Strategies for Stress')" class="mt-6 px-6 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-indigo-700 flex items-center gap-2">
                        <span class="material-symbols-outlined">bookmark</span>
                        Save to Reading List
                    </button>
                `
            },
            'Understanding Anxiety': {
                type: 'video',
                content: `
                    <div class="aspect-video bg-slate-900 rounded-lg mb-6 flex items-center justify-center">
                        <div class="text-center text-white">
                            <span class="material-symbols-outlined text-6xl mb-4">play_circle</span>
                            <p class="text-lg font-medium">Understanding Anxiety</p>
                            <p class="text-sm text-slate-400">Duration: 12:34</p>
                            <button class="mt-4 px-6 py-2 bg-primary rounded-lg font-medium hover:bg-indigo-700">Play Video</button>
                        </div>
                    </div>
                    <div class="prose dark:prose-invert max-w-none">
                        <h4>Video Summary</h4>
                        <p>This video covers the basics of anxiety, including common symptoms, triggers, and management techniques. Learn from mental health experts about how to recognize anxiety and when to seek help.</p>
                        
                        <h4>Key Topics</h4>
                        <ul>
                            <li>What is anxiety?</li>
                            <li>Physical symptoms of anxiety</li>
                            <li>Common triggers for students</li>
                            <li>Coping strategies</li>
                            <li>When to seek professional help</li>
                        </ul>
                    </div>
                    <button onclick="saveResource('Understanding Anxiety')" class="mt-6 px-6 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-indigo-700 flex items-center gap-2">
                        <span class="material-symbols-outlined">bookmark</span>
                        Save to Watch Later
                    </button>
                `
            },
            'Mindfulness for Beginners': {
                type: 'article',
                content: `
                    <div class="prose dark:prose-invert max-w-none">
                        <h4>What is Mindfulness?</h4>
                        <p>Mindfulness is the practice of being fully present and engaged in the current moment, without judgment. It can help reduce stress, improve focus, and enhance emotional regulation.</p>
                        
                        <h4>Simple Exercises to Start</h4>
                        <ol>
                            <li><strong>Mindful Breathing</strong> - Focus on your breath for 5 minutes. Notice the sensation of air entering and leaving your body.</li>
                            <li><strong>Body Scan</strong> - Slowly move your attention through different parts of your body, noticing any tension or sensations.</li>
                            <li><strong>Mindful Eating</strong> - Eat one meal slowly, savoring each bite and noticing the flavors and textures.</li>
                        </ol>
                        
                        <h4>Tips for Success</h4>
                        <ul>
                            <li>Start with just 5 minutes a day</li>
                            <li>Be patient with yourself</li>
                            <li>Practice at the same time each day</li>
                            <li>Use guided meditations if helpful</li>
                        </ul>
                    </div>
                    <button onclick="saveResource('Mindfulness for Beginners')" class="mt-6 px-6 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-indigo-700 flex items-center gap-2">
                        <span class="material-symbols-outlined">bookmark</span>
                        Save to Reading List
                    </button>
                `
            }
        };

        // Default content for resources not in the object
        const defaultContent = `
            <div class="prose dark:prose-invert max-w-none">
                <p>This resource contains valuable information about mental health and well-being. The full content will be available soon.</p>
                <p>In the meantime, explore our other resources or speak with a counselor for personalized guidance.</p>
            </div>
            <button onclick="saveResource('this resource')" class="mt-6 px-6 py-3 bg-primary text-white font-semibold rounded-lg hover:bg-indigo-700 flex items-center gap-2">
                <span class="material-symbols-outlined">bookmark</span>
                Save for Later
            </button>
        `;

        function openResource(title, type) {
            document.getElementById('modalTitle').textContent = title;
            const content = resourceContent[title] ? resourceContent[title].content : defaultContent;
            document.getElementById('modalContent').innerHTML = content;
            document.getElementById('resourceModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('resourceModal').classList.add('hidden');
        }

        function saveResource(title) {
            showToast(`"${title}" saved to your list!`);
        }

        function showToast(message) {
            const toast = document.getElementById('successToast');
            document.getElementById('toastMessage').textContent = message;
            toast.classList.remove('hidden');
            setTimeout(() => toast.classList.add('hidden'), 3000);
        }
    </script>
</body>

</html>